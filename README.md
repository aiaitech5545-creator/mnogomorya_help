# Telegram Consult Bot ‚Äî Railway + Google Sheets + Google Calendar (aiogram v3)

–ë–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏:
- üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç 2): –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å **45 –º–∏–Ω**, —Å—Ç–æ–∏–º–æ—Å—Ç—å **$75**.
- üìù –ê–Ω–∫–µ—Ç–∞ –≤ –ø–æ—Ä—è–¥–∫–µ: –∏–º—è ‚Üí @username ‚Üí —Ç–µ–ª–µ—Ñ–æ–Ω (–æ–ø—Ü.) ‚Üí —Ç–∏–ø —Å—É–¥–Ω–∞ ‚Üí –¥–æ–ª–∂–Ω–æ—Å—Ç—å ‚Üí –æ–ø—ã—Ç ‚Üí —Ç–µ–º–∞.
- üóì –í—ã–±–æ—Ä —Å–ª–æ—Ç–∞ –∏–∑ **PostgreSQL**.
- üí≥ –í –∫–æ–Ω—Ü–µ ‚Äî –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã: **üá∑üá∫ –ö–∞—Ä—Ç–æ–π –∏–∑ –†–§ / üåç –ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞** (—Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º).
- üìä –í—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ **Google Sheets** (Service Account).
- üìÜ –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ **Google Calendar** –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã.
- üöÑ –ì–æ—Ç–æ–≤ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ **Railway** (Dockerfile, requirements, –º–∏–≥—Ä–∞—Ü–∏–∏, `.env.example`).

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `.env.example` –≤ Railway ‚Üí Variables –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```
BOT_TOKEN=
ADMIN_IDS=211779388

TZ=Europe/Stockholm
BASE_URL=https://<your-app>.up.railway.app
PORT=8080
SLOT_MINUTES=60
PRICE_USD=75

DATABASE_URL=postgresql+asyncpg://user:pass@host:5432/dbname

# Google Sheets
GSPREAD_SERVICE_ACCOUNT_JSON={"type":"service_account", ...}
GSPREAD_SHEET_ID=<spreadsheet_id>

# Google Calendar
GCAL_SERVICE_ACCOUNT_JSON={"type":"service_account", ...}   # –º–æ–∂–Ω–æ —Ç–æ—Ç –∂–µ JSON, —á—Ç–æ –∏ –¥–ª—è Sheets
GCAL_CALENDAR_ID=primary_or_calendar_id                     # id –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —Å –∫–æ—Ç–æ—Ä—ã–º –ø–æ–¥–µ–ª–∏–ª–∏—Å—å
```

> –í–∞–∂–Ω–æ: –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º —Å `client_email` —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç–∞ (–†–µ–¥–∞–∫—Ç–æ—Ä). –î–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `GCAL_CALENDAR_ID=primary`, –µ—Å–ª–∏ —ç—Ç–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫–∫–∞—É–Ω—Ç–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç.

## –ö–æ–º–∞–Ω–¥—ã
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –º–µ–Ω—é
- `/admin` ‚Äî —Å–ø—Ä–∞–≤–∫–∞
- `/addslot YYYY-MM-DD HH:MM` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–æ—Ç (–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–µ—Ä–µ—Ç—Å—è –∏–∑ `SLOT_MINUTES`)

## –î–µ–ø–ª–æ–π –Ω–∞ Railway ‚Äî —à–∞–≥–∏
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub.
2. –ù–∞ Railway: **New Project ‚Üí Deploy from Repo**.
3. –í **Networking** ‚Üí **Generate Service Domain** —Å `Target port: 8080` ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–æ–º–µ–Ω –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ `BASE_URL`.
4. –í **Variables** –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.example` (—Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏).
5. –î–æ–±–∞–≤—å—Ç–µ **PostgreSQL** (New ‚Üí Database / Provision PostgreSQL).
6. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ `migrations/001_init.sql` –≤ –∫–æ–Ω—Å–æ–ª–∏ –ë–î.
7. –ù–∞–∂–º–∏—Ç–µ **Redeploy**.
8. –í Telegram –æ—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ ‚Üí `/start` ‚Üí –ø—Ä–æ–π–¥–∏—Ç–µ –∞–Ω–∫–µ—Ç—É ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ—Ç ‚Üí —É–∫–∞–∂–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã ‚Äî –∑–∞—è–≤–∫–∞ –ø–æ–ø–∞–¥–µ—Ç –≤ Google Sheets –∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ –≤ Google Calendar.

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT
